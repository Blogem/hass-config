# speel concertzender op chromebitch
concertzender:
  alias: "Concertzender Live"
  sequence:
    - service: switch.turn_on
      data:
        entity_id: switch.onkyo
    - service: media_player.volume_set
      data:
        entity_id: media_player.chromebitch
        volume_level: 0.01
    - delay: '00:00:01'
    - service: media_player.play_media
      data:
        entity_id: media_player.chromebitch
        media_content_id: http://streams.greenhost.nl:8080/live
        media_content_type: 'audio/mp4'
        
# speel spotify op Chromecast af
spotify2chromecast:
  alias: "Speel spotify op Chromecast af"
  sequence:
    - condition: state
      entity_id: media_player.spotify
      state: playing
    - service: media_player.turn_on
      entity_id: media_player.chromebitch
    - service: switch.turn_on
      data:
        entity_id: switch.onkyo
    - delay: '00:00:02'
    - service: spotcast.start
      data:
        entity_id: media_player.chromebitch
        
        
# Zigbee2mqtt - Scripts for renaming & removing devices
zigbee2mqtt_rename:
  alias: Zigbee2mqtt Rename
  sequence:
    service: mqtt.publish
    data_template:
      topic: zigbee2mqtt/bridge/config/rename
      payload_template: >-
        {
          "old": "{{ states.input_text.zigbee2mqtt_old_name.state | string }}",
          "new": "{{ states.input_text.zigbee2mqtt_new_name.state | string }}"
        }
zigbee2mqtt_remove:
  alias: Zigbee2mqtt Remove
  sequence:
    service: mqtt.publish
    data_template:
      topic: zigbee2mqtt/bridge/config/remove
      payload_template: "{{ states.input_text.zigbee2mqtt_remove.state | string }}"
        

# for testing purposes
flash_avmeubel:
  alias: Flash AV-meubel
  sequence:
    - service: light.turn_on
      entity_id: light.av_meubel
    - delay: '00:00:01'
    - service: light.turn_off
      entity_id: light.av_meubel
      
# ikea lights workaround
turn_on_ikea_light_color_temp:
  sequence:
    # Check whether the light is off (optional)
    #- condition: template
    #  value_template: "{{ is_state(entity_id, 'off') }}"
    #- delay: '00:00:01'
    # Set the brightness of the lights.
    - service: light.turn_on
      data_template:
        entity_id: "{{ entity_id }}"
        brightness_pct: "{{ brightness_pct }}"
        transition: 1
    - delay: '00:00:01'
    # Set the color temperature.
    - service: light.turn_on
      data_template:
        entity_id: "{{ entity_id }}"
        color_temp: "{{ color_temp }}"
        transition: 5
turn_on_ikea_light_rgb_color:
  sequence:
    # Check whether the light is off (optional)
    #- condition: template
    #  value_template: "{{ is_state(entity_id, 'off') }}"
    #- delay: '00:00:01'
    # Set the brightness of the lights.
    - service: light.turn_on
      data_template:
        entity_id: "{{ entity_id }}"
        brightness_pct: "{{ brightness_pct }}"
        transition: 1
    - delay: '00:00:01'
    # Set the color temperature.
    - service: light.turn_on
      data_template:
        entity_id: "{{ entity_id }}"
        rgb_color: ["{{ r }}","{{ g }}","{{ b }}"]
        transition: 5
turn_on_ikea_light_rgb_color2:
  sequence:
    # Check whether the light is off (optional)
    #- condition: template
    #  value_template: "{{ is_state(entity_id, 'off') }}"
    #- delay: '00:00:01'
    # Set the brightness of the lights.
    - service: light.turn_on
      data_template:
        entity_id: "{{ entity_id }}"
        brightness_pct: "{{ brightness_pct }}"
        transition: 1
    - delay: '00:00:01'
    # Set the color temperature.
    - service: light.turn_on
      data_template:
        entity_id: "{{ entity_id }}"
        rgb_color: ["{{ r }}","{{ g }}","{{ b }}"]
        transition: 5
# IKEA scene wrappers
# Also checkout /local/community/lovelace-light-with-profiles/light-with-profiles.js
scene_overdag:
  sequence:
    - service: script.turn_on_ikea_light_color_temp
      data_template:
        entity_id: light.keuken_werk
        brightness_pct: 94
        color_temp: 263
scene_avond:
  sequence:
    - service: script.turn_on_ikea_light_color_temp
      data_template:
        entity_id: light.keuken_werk
        brightness_pct: 81
        color_temp: 403
    - service: script.turn_on_ikea_light_rgb_color
      data_template:
        entity_id: light.av_meubel
        brightness_pct: 80
        r: 255
        g: 170
        b: 88
    - service: script.turn_on_ikea_light_rgb_color2
      data_template:
        entity_id: light.bureau
        brightness_pct: 63
        r: 255
        g: 149
        b: 50
scene_avond2:
  sequence:
    - service: script.turn_on_ikea_light_color_temp
      data_template:
        entity_id: light.keuken_werk
        brightness_pct: 50
        color_temp: 427
    - service: script.turn_on_ikea_light_rgb_color
      data_template:
        entity_id: light.av_meubel
        brightness_pct: 80
        r: 255
        g: 170
        b: 88
    - service: script.turn_on_ikea_light_rgb_color2
      data_template:
        entity_id: light.bureau
        brightness_pct: 63
        r: 255
        g: 149
        b: 50
scene_relax:
  sequence:
    - service: script.turn_on_ikea_light_rgb_color
      data_template:
        entity_id: light.av_meubel
        brightness_pct: 22
        r: 255
        g: 149
        b: 50
    - service: script.turn_on_ikea_light_rgb_color2
      data_template:
        entity_id: light.bureau
        brightness_pct: 11
        r: 255
        g: 96
        b: 0
        
scene_nachtlicht:
  sequence:
    - service: script.turn_on_ikea_light_rgb_color
      data_template:
        entity_id: light.av_meubel
        brightness_pct: 1
        r: 255
        g: 96
        b: 0

radiator_woonkamer_on:
  sequence:
  - service: mqtt.publish
    data_template:
      topic: zigbee2mqtt/0x00158d000192371a/set
      payload: "{\"current_heating_setpoint\": 20}"
    
radiator_woonkamer_off:
  sequence:
  - service: mqtt.publish
    data_template:
      topic: zigbee2mqtt/0x00158d000192371a/set
      payload: "{\"current_heating_setpoint\": 0}"
  
